(function(t){function e(e){for(var i,s,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)s=r[d],o[s]&&m.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},o={app:0},a=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1aff":function(t,e,n){var i=n("878d");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("2fb2").default;o("4ee7441e",i,!0,{})},"1eac":function(t,e,n){var i=n("3b5d");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("2fb2").default;o("66013113",i,!0,{})},2962:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".mb15{margin-bottom:15px}",""])},3512:function(t,e,n){var i=n("f10c");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("2fb2").default;o("136bd6e0",i,!0,{})},"3b5d":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".bottom-menu{position:absolute;width:100%;bottom:0}.searching--closed{padding-left:0;width:0}.searching>*{right:8px}.searching--closed>*{display:none}.list-border-bottom{border-bottom:1px solid hsla(0,0%,100%,.12)}.subheader{text-transform:uppercase}",""])},"3f63":function(t,e,n){var i=n("3f74");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("2fb2").default;o("f9a43dc2",i,!0,{})},"3f74":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".app-title{font-size:120%}",""])},4607:function(t,e,n){var i=n("59a8");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("2fb2").default;o("3a4ffa84",i,!0,{})},5137:function(t,e,n){var i=n("d220");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("2fb2").default;o("954036da",i,!0,{})},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("a026"),o=n("ce5b"),a=n.n(o),s=n("ee98"),r=n.n(s),l=(n("bf40"),{name:"MenuItem",props:["item","mini"]}),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{right:"",disabled:!t.mini}},[n("v-list-tile",{key:t.item.icon,attrs:{slot:"activator",to:t.item.link,exact:""},slot:"activator"},[n("v-list-tile-action",[n("v-icon",{domProps:{innerHTML:t._s(t.item.icon)}})],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{textContent:t._s(t.item.title)}})],1)],1),t._v(" "),n("span",{domProps:{textContent:t._s(t.item.description)}})],1)},u=[],d=n("2455"),m=!1,f=null,h=null,v=null,p=Object(d["a"])(l,c,u,m,f,h,v),_=p.exports,g={name:"MenuItems",components:{MenuItem:_},props:["items","mini"]},b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.items,function(e,i){return n("v-list",{key:i,class:{"list-border-bottom":t.mini},attrs:{subheader:""}},[n("v-subheader",[t._v(t._s(e.title))]),t._v(" "),t._l(e.items,function(e,i){return[n("menu-item",{key:i,attrs:{mini:t.mini,item:e}})]})],2)}),t._v(" "),n("v-divider")],2)},E=[],D=!1,x=null,y=null,k=null,O=Object(d["a"])(g,b,E,D,x,y,k),I=O.exports,P={name:"ExtraMenuItem",props:["item","mini"]},j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-tooltip",{attrs:{right:"",disabled:!t.mini}},[n("v-toolbar",{staticClass:"transparent",attrs:{slot:"activator",flat:"",dense:""},slot:"activator"},[n("v-list",{staticClass:"pa-0",class:{"list-border-bottom":t.mini}},[n("v-list-tile",{attrs:{to:"/",exact:""}},[n("v-list-tile-action",[n("v-icon",{domProps:{innerHTML:t._s(t.item.icon)}})],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",{domProps:{textContent:t._s(t.item.title)}})],1)],1)],1)],1),t._v(" "),n("span",{domProps:{textContent:t._s(t.item.description)}})],1)},T=[],R=!1,S=null,A=null,w=null,C=Object(d["a"])(P,j,T,R,S,A,w),L=C.exports,M={name:"SidebarToggler",props:["mini"],methods:{toggleMini:function(){this.$store.commit("admin/TOGGLE_MENU_MINI")}}},$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{staticClass:"transparent",attrs:{flat:"",dense:""}},[n("v-list",{staticClass:"pa-0",class:{"list-border-bottom":t.mini}},[n("v-list-tile",[t.mini?t._e():n("v-list-tile-action",[n("v-icon",{attrs:{large:"",color:"green"}},[t._v("developer_board")])],1),t._v(" "),t.mini?t._e():n("v-list-tile-content",[n("v-list-tile-title",[n("span",{staticClass:"app-title"},[t._v("Projects")])])],1),t._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.toggleMini(e)}}},[n("v-icon",{domProps:{innerHTML:t._s(t.mini?"chevron_right":"chevron_left")}})],1)],1)],1)],1)],1)},N=[];function U(t){n("3f63")}var q=!1,B=U,V=null,G=null,J=Object(d["a"])(M,$,N,q,B,V,G),H=J.exports,K={name:"Sidebar",components:{MenuItems:I,ExtraMenuItem:L,SidebarToggler:H},computed:{status:function(){return this.$store.state.admin.status},extraMenuItem:function(){return this.$store.state["admin/extraMenuItem"]},menuItems:function(){return this.$store.getters["admin/leftMenu"]},miniMenu:function(){return this.status.miniMenu}},data:function(){return{drawer:!0,fixed:!1,tabs:null}},created:function(){console.log("created",this.$store)}},Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{staticClass:"blue-grey darken-4",attrs:{width:"250",dark:"",persistent:"","mini-variant":t.miniMenu,fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[n("sidebar-toggler",{attrs:{mini:t.miniMenu}}),t._v(" "),n("v-divider"),t._v(" "),t.extraMenuItem?n("extra-menu-item",{attrs:{mini:t.miniMenu,item:t.extraMenuItem}}):t._e(),t._v(" "),n("v-divider"),t._v(" "),n("menu-items",{attrs:{items:t.menuItems,mini:t.miniMenu}})],1)},F=[];function W(t){n("1eac")}var z=!1,Q=W,X=null,Z=null,tt=Object(d["a"])(K,Y,F,z,Q,X,Z),et=tt.exports,nt={name:"App",components:{Sidebar:et}},it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("notifications",{attrs:{group:"global",max:10}}),t._v(" "),n("v-app",[n("sidebar"),t._v(" "),n("v-content",[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view")],1)],1)],1)],1)},ot=[];function at(t){n("3512")}var st=!1,rt=at,lt="data-v-7860cefa",ct=null,ut=Object(d["a"])(nt,it,ot,st,rt,lt,ct),dt=ut.exports,mt=n("2f62"),ft={status:{loading:!0},error:null,chartSize:{currentLoad:15,loadAverage:15,memoryUsage:15,status:25},appStatus:{created:0,docker:{services:[],info:{Containers:0,ContainersRunning:0,ContainersPaused:0,ContainersStopped:0}},system:{load:{uptime:0,currentload:0,avgload:[0,0,0]},memory:{},disk:{},queues:[]}},historyHeaders:[{text:"Время вх.запроса",value:"timeSet"},{text:"Время в очереди",value:"timeInQueue"}],queuesAvailable:["backup","backuped"],projects:[],currentProject:{},ui:{defaultPagination:[20,50,{text:"All",value:-1}],defaultControls:[{name:"Edit",icon:"edit",color:"teal lighten-1",emit:"editItem"},{name:"Delete",icon:"delete",color:"pink lighten-2",emit:"deleteItem"},{name:"Backup",icon:"backup",color:"indigo lighten-2",emit:"backupItem"}]}},ht={projects:function(t){return t.projects},currentProject:function(t){return t.currentProject}},vt=n("bc3a"),pt=n.n(vt),_t={serverURI:"/api/v1/"},gt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;if(t){if(e){var o="http"===e.substr(0,4)?e:_t.serverURI+e;return pt()({method:t,url:o,data:n,timeout:i}).catch(function(t){rn.commit("SET_ERROR",t)})}console.error("API function call requires uri argument")}else console.error("API function call requires method argument")},bt=function(t,e){return rn.commit("admin/LOADING"),gt(t,e).then(function(t){if("ok"===t.data.status)return rn.commit("admin/LOADED"),t.data.data;rn.commit("admin/LOADING_ERROR",{message:"Response status is not ok",code:406})}).catch(function(t){rn.commit("admin/LOADING_ERROR",t)})},Et={request:gt,getData:bt},Dt=function(t){var e=t.commit;Et.request("get","status/",null,2500).then(function(t){e("STATUS_LOADED",t.data)})},xt=function(t){var e=t.commit;Et.getData("get","projects/").then(function(t){e("LOADED_PROJECTS",t)})},yt=function(t,e){var n=t.commit;Et.getData("get","projects/".concat(e)).then(function(t){n("OPENED_PROJECT",t)})},kt=function(t,e){var n=t.commit;Et.request("post","projects/",e).then(n("ADDED_PROJECT",e))},Ot=function(t,e){var n=t.commit;Et.request("delete","projects/".concat(e)).then(n("DELETED_PROJECT",e))},It=function(t,e){var n=t.commit;Et.request("post","projects/".concat(e.id),e).then(n("SAVED_PROJECT",e))},Pt=function(t,e){var n=t.commit;Et.request("get","projects/".concat(e,"/backup")).then(n("BACKUP_TASK_SENDED",e))},jt={loadStatus:Dt,loadProjects:xt,addProject:kt,deleteProject:Ot,saveProject:It,backupProject:Pt,openProject:yt},Tt=(n("55dd"),n("7f7f"),n("5a0c")),Rt=n.n(Tt),St=n("4208"),At=n.n(St);Rt.a.extend(At.a);var wt={STATUS_LOADED:function(t,e){t.appStatus=e},TOTAL_HISTORY_LOADED:function(t,e){t.history.total=e.data},CONTAINER_HISTORY_LOADED:function(t,e){t.history.containers[e[0].info.name]=e},HISTORY_STATS_LOADED:function(t,e){t.historyStats=e.data},CLEAR_NOTIFICATIONS:function(t){t.socket.notifications=[]},CLEAR_TEST_RESPONSE:function(t){t.socket.testResponse=null},SET_ERROR:function(t,e){t.error=e},LOADED_PROJECTS:function(t,e){t.projects=e.map(function(t){return t.status.lastUpdate=Rt()(t.status.lastUpdate).fromNow(),t}).sort(function(t,e){return t.name>e.name?1:-1})},OPENED_PROJECT:function(t,e){t.currentProject=e},ADDED_PROJECT:function(t,e){console.log("ADDED PROJECT - ",e)},DELETED_PROJECT:function(t,e){console.log("DELETED PROJECT - ",e)},SAVED_PROJECT:function(t,e){console.log("SAVED PROJECT - ",e)},BACKUP_TASK_SENDED:function(t,e){console.log("BACKUP TASK SENDED TO QUEUE - ",e)},SERVERS_STATUS_LOADED:function(t,e){console.log("SERVERS STATUSE LOADED - ",e)}},Ct={extraMenuItem:null,leftMenu:[],data:{items:[],headers:[],currentHeaders:[],history:[]},currentEntity:null,entities:null,status:{miniMenu:!1,loading:!1},ui:{defaultPagination:[20,50,{text:"All",value:-1}],defaultControls:[{name:"Edit",icon:"edit",color:"teal",emit:"editItem"},{name:"Delete",icon:"delete",color:"pink",emit:"deleteItem"}]},loadFromBackend:!1},Lt={leftMenu:function(t){return t.leftMenu.map(function(t){return t.items&&t.items.map&&t.items.map(function(t){return t.description||(t.description=t.title),t}),t})},items:function(t){return t.data.items?t.data.items:[]},headers:function(t){if(!t.data.headers[t.currentEntity])return[];var e=t.data.headers[t.currentEntity].slice();return t.ui.defaultControls&&t.ui.defaultControls.length&&e.push({text:"Actions",value:"actions",sortable:!1,invisible:!0}),e},currentEntityList:function(t){return t.currentEntity?t.data[t.currentEntity]:[]},entityTitle:function(t){return t.currentEntity&&t.data.entities&&t.data.entities[t.currentEntity]?t.data.entities[t.currentEntity].title:""},entitiesTitle:function(t){return t.currentEntity&&t.data.entities&&t.data.entities[t.currentEntity]?t.data.entities[t.currentEntity].titlePlural:""}},Mt=function(t,e){if(!t.data.entities[e])throw new Error("Entity ".concat(e," not found!"));return t.data.entities[e]},$t=function(t,e){return Mt(t,e).apiPath},Nt={getApiPathByEntityName:$t,getEntityByName:Mt},Ut=[{name:"history",title:"Request",titlePlural:"Requests",apiPath:"history",fields:[{name:"_id",title:"ID"},{name:"companyId",title:"companyId"},{name:"soapMethod",title:"soapMethod"}],editable:!1}],qt={title:"Overview",description:"Projects overview",icon:"home",link:"/"},Bt=[{title:"Главное",items:[{icon:"dashboard",title:"Рабочий стол",link:"/"},{icon:"ballot",title:"Проекты",link:"/projects/",description:null},{icon:"bar_chart",title:"Состояние серверов",link:"/server-status/",description:null}]}],Vt=function(t){setTimeout(function(){t.commit("LOADED_ALL",{entities:Ut,extraMenuItem:qt,leftMenu:Bt})},200)},Gt=function(t){Et.getData("get","admin/all/").then(function(e){t.commit("LOADED_ALL",e)})},Jt=function(t){console.log("loadAll",t,t.state.loadFromBackend),t.state.loadFromBackend?Gt(t):Vt(t)},Ht=function(t,e){var n=e.entityName;Et.getData("get",Nt.getApiPathByEntityName(t.state,n)).then(function(e){t.commit("LOADED_ENTITY",{data:e,entityName:n})})},Kt={loadAll:Jt,loadEntity:Ht},Yt=(n("b54a"),n("ac6a"),{name:"DataTableWithControls",props:["headers","items","loading","controls","pagination","transforms","totalItems","disableInitialSort","hideActions"],computed:{showControls:function(){return this.$props.controls&&this.$props.controls.length},defaultPagination:function(){return this.$store.state.admin.ui.defaultPagination}},methods:{getClassName:function(t){return t.align?"text-xs-"+t.align:""},emit:function(t,e){this.$emit(t,e)},getTransformedValue:function(t,e){return this.transforms&&this.transforms[t]?this.transforms[t](e):e},click:function(t){this.$emit("click",t.item,t.index)}}}),Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,loading:!0,"rows-per-page-items":t.defaultPagination,"total-items":t.totalItems,"disable-initial-sort":t.disableInitialSort,"hide-actions":t.hideActions},on:{"update:pagination":function(e){t.$emit("update:pagination",e)}},scopedSlots:t._u([{key:"items",fn:function(e){return[t._l(t.headers,function(i,o){return i.invisible?t._e():n("td",{key:e.index+"_"+o,class:t.getClassName(i),attrs:{"data-key":e.index+"_"+o},on:{click:function(n){t.click(e)}}},[t._v("\n      "+t._s(t.getTransformedValue(i.value,e.item[i.value]))+"\n    ")])}),t._v(" "),n("td",{staticClass:"justify-center layout px-0s table-controls",class:{invisible:!t.showControls}},t._l(t.controls,function(i,o){return n("v-btn",{key:e.index+"_"+o,staticClass:"mx-0",attrs:{icon:""},on:{click:function(n){t.emit(i.emit,e.item)}}},[n("v-icon",{attrs:{color:i.color}},[t._v(t._s(i.icon))])],1)}))]}}])},[n("v-progress-linear",{attrs:{slot:"progress",color:"blue",indeterminate:"",active:t.loading},slot:"progress"})],1)},Wt=[];function zt(t){n("5137")}var Qt=!1,Xt=zt,Zt=null,te=null,ee=Object(d["a"])(Yt,Ft,Wt,Qt,Xt,Zt,te),ne=ee.exports,ie={name:"Entity",components:{DataTable:ne},watch:{$route:{handler:"fetchData",immediate:!0}},methods:{fetchData:function(){this.$store.dispatch("admin/loadEntity",this.$route.meta)},editItem:function(t){console.log("Data editItem",t)},deleteItem:function(t){console.log("Data deleteItem",t)}},computed:{status:function(){return this.$store.state.status},controls:function(){return this.$store.state.ui.defaultControls},isShow:function(){return this.headers&&this.headers.length},items:function(){return this.$store.getters.items},headers:function(){return this.$store.getters.headers},entitiesTitle:function(){return this.$store.getters.entitiesTitle}}},oe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v(t._s(t.entitiesTitle))]),t._v(" "),t.isShow?n("data-table",{attrs:{headers:t.headers,items:t.items,loading:t.status.loading,controls:t.controls},on:{editItem:t.editItem,deleteItem:t.deleteItem}}):t._e()],1)},ae=[],se=!1,re=null,le=null,ce=null,ue=Object(d["a"])(ie,oe,ae,se,re,le,ce),de=ue.exports,me=n("8c4f"),fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  Dashboard\n")])},he=[],ve=null,pe=!1,_e=null,ge=null,be=null,Ee=Object(d["a"])(ve,fe,he,pe,_e,ge,be),De=Ee.exports,xe={name:"Projects",data:function(){return{showDialog:!1,formValid:!1,id:"",name:"",nameRules:[function(t){return!!t||"Название обязательно"}],url:"",urlRules:[function(t){return!!t||"URL адрес обязятелен"}],disableInput:!1,modalTitle:"Добавить новый проект",modalSubmitButton:"Добавить",modalAction:""}},components:{DataTable:ne},methods:{sendRequest:function(){this.$store.dispatch("loadProjects")},clickItem:function(t){console.log("clicked on",t),document.location.href="/projects/"+t._id},addItem:function(){this.modalTitle="Добавить новый проект",this.modalSubmitButton="Добавить",this.modalAction="Add",this.name="",this.url="",this.disableInput=!1,this.showDialog=!0},editItem:function(t){this.modalTitle="Редактировать проект",this.modalSubmitButton="Сохранить",this.modalAction="Edit",this.id=t._id,this.name=t.name,this.url=t.url,this.disableInput=!1,this.showDialog=!0},deleteItem:function(t){this.modalTitle="Удалить проект",this.modalSubmitButton="Удалить",this.modalAction="Delete",this.id=t._id,this.name=t.name,this.url=t.url,this.disableInput=!0,this.showDialog=!0},backupItem:function(t){this.modalTitle="Сделать бэкап проекта",this.modalSubmitButton="OK",this.modalAction="Backup",this.id=t._id,this.name=t.name,this.url=t.url,this.disableInput=!0,this.showDialog=!0},confirmModalAction:function(){var t=this.modalAction;switch(t){default:break;case"Add":this.addProject();break;case"Edit":this.saveProject();break;case"Delete":this.deleteProject();break;case"Backup":this.backupProject();break}},addProject:function(){console.log("Проект добавлен",this.name,this.url),this.$store.dispatch("addProject",{name:this.name,url:this.url}),this.showDialog=!1,this.sendRequest()},deleteProject:function(){console.log("Проект удалён",this.name,this.url,this.id),this.$store.dispatch("deleteProject",this.id),this.showDialog=!1,this.sendRequest()},saveProject:function(){console.log("Проект сохранен",this.id,this.name,this.url),this.$store.dispatch("saveProject",{name:this.name,url:this.url,id:this.id}),this.showDialog=!1,this.sendRequest()},backupProject:function(){console.log("Запрос на создание бэкапа добавлен в очередь"),this.$store.dispatch("backupProject",this.id),this.showDialog=!1}},computed:{controls:function(){return this.$store.state.ui.defaultControls},isShow:function(){return!0},items:function(){return this.$store.getters.projects},totalItems:function(){return this.$store.getters.projects},headers:function(){return[{text:"Название",value:"name"},{text:"URL",value:"url",sortable:!1}]},transforms:function(){return{updateAt:function(t){return t.toString()}}}},created:function(){this.sendRequest()},mounted:function(){var t=this;document.addEventListener("keydown",function(e){!0===t.showDialog&&27===e.keyCode?t.showDialog=!1:!0===t.showDialog&&!0===t.formValid&&13===e.keyCode&&t.confirmModalAction()})}},ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",[n("h2",[t._v("Проекты")]),t._v(" "),n("v-layout",{attrs:{row:"","align-end":""}},[n("v-flex",{attrs:{xs6:""}},[n("v-dialog",{attrs:{width:"500"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[n("v-btn",{staticClass:"mb15",attrs:{slot:"activator",color:"green lighten-2",dark:""},on:{click:t.addItem},slot:"activator"},[t._v("\n            Добавить\n          ")]),t._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("\n              "+t._s(t.modalTitle)+"\n            ")]),t._v(" "),n("v-card-text",[n("v-form",{model:{value:t.formValid,callback:function(e){t.formValid=e},expression:"formValid"}},[n("v-text-field",{attrs:{label:"Название",rules:t.nameRules,disabled:t.disableInput,required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("v-text-field",{attrs:{label:"URL",rules:t.urlRules,disabled:t.disableInput,required:""},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"red",flat:""},on:{click:function(e){t.showDialog=!1}}},[t._v("\n                Отмена\n              ")]),t._v(" "),n("v-btn",{attrs:{color:"green",flat:"",disabled:!t.formValid},on:{click:t.confirmModalAction}},[t._v("\n                "+t._s(t.modalSubmitButton)+"\n              ")])],1)],1)],1),t._v(" "),n("v-btn",{staticClass:"mb15",attrs:{color:"blue lighten-2",dark:""},on:{click:t.sendRequest}},[t._v("\n          Обновить\n        ")])],1)],1),t._v(" "),t.isShow?n("data-table",{attrs:{headers:t.headers,items:t.items,loading:!1,transforms:t.transforms,"hide-actions":!1,controls:t.controls},on:{click:t.clickItem,editItem:t.editItem,deleteItem:t.deleteItem,backupItem:t.backupItem}}):t._e()],1)],1)},ke=[];function Oe(t){n("1aff")}var Ie=!1,Pe=Oe,je=null,Te=null,Re=Object(d["a"])(xe,ye,ke,Ie,Pe,je,Te),Se=Re.exports,Ae={name:"Project",data:function(){return{id:this.$route.params.id,formValid:!1,showDialog:!1,name:"",nameRules:[function(t){return!!t||"Название обязательно"}],url:"",urlRules:[function(t){return!!t||"URL адрес обязятелен"}]}},methods:{sendRequest:function(){this.$store.dispatch("openProject",this.id)},openDialog:function(){this.showDialog=!0,this.name=this.project.name,this.url=this.project.url},backupProject:function(){console.log("Запрос на создание бэкапа добавлен в очередь"),this.$store.dispatch("backupProject",this.id)},saveProject:function(){console.log("Проект сохранен",this.id,this.name,this.url),this.$store.dispatch("saveProject",{name:this.name,url:this.url}),this.showDialog=!1,this.sendRequest()}},computed:{project:function(){return this.$store.getters.currentProject}},created:function(){this.sendRequest()},mounted:function(){var t=this;document.addEventListener("keydown",function(e){!0===t.showDialog&&27===e.keyCode?t.showDialog=!1:!0===t.showDialog&&!0===t.formValid&&13===e.keyCode&&t.saveProject()})}},we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-container",[n("v-dialog",{attrs:{width:"500"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[n("v-btn",{staticClass:"mb15",attrs:{slot:"activator",color:"orange lighten-1",dark:""},on:{click:t.openDialog},slot:"activator"},[t._v("\n        Редактировать\n      ")]),t._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("\n          Редактировать проект\n        ")]),t._v(" "),n("v-card-text",[n("v-form",{model:{value:t.formValid,callback:function(e){t.formValid=e},expression:"formValid"}},[n("v-text-field",{attrs:{label:"Название",rules:t.nameRules,required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),n("v-text-field",{attrs:{label:"URL",rules:t.urlRules,required:""},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}})],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"red",flat:""},on:{click:function(e){t.showDialog=!1}}},[t._v("\n            Отмена\n          ")]),t._v(" "),n("v-btn",{attrs:{color:"green",flat:"",disabled:!t.formValid},on:{click:t.saveProject}},[t._v("\n            Сохранить\n          ")])],1)],1)],1),t._v(" "),n("v-btn",{staticClass:"mb15",attrs:{color:"indigo lighten-1",dark:""},on:{click:t.backupProject}},[t._v("\n      Сделать бэкап\n    ")]),t._v(" "),n("v-card",[n("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[t._v("\n       Проект\n      ")]),t._v(" "),n("v-card-text",[n("h3",[t._v("Название")]),t._v(" "),n("span",[t._v(t._s(this.project.name))]),t._v(" "),n("h3",[t._v("URL")]),t._v(" "),n("span",[t._v(t._s(this.project.url))])])],1)],1)],1)},Ce=[];function Le(t){n("7e8e")}var Me=!1,$e=Le,Ne=null,Ue=null,qe=Object(d["a"])(Ae,we,Ce,Me,$e,Ne,Ue),Be=qe.exports,Ve={data:function(){return{}},methods:{getUrl:function(t){return"http"===t.substr(0,4)?t:"http://"+t},updateServersStatus:function(){var t=this;this.$store.dispatch("loadProjects"),this.timerId=setTimeout(function(){t.updateServersStatus()},5e3)},statusCircle:function(t){var e=Math.floor(t/100);switch(e){default:return"status-circle red-circle";case 2:return"status-circle green-circle";case 3:return"status-circle orange-circle"}}},computed:{items:function(){return this.$store.getters.projects},totalItems:function(){return this.$store.getters.projects},headers:function(){return[{text:"Название",value:"name"},{text:"URL",value:"url",sortable:!1}]}},created:function(){this.updateServersStatus()},beforeDestroy:function(){clearTimeout(this.timerId)}},Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:"","grid-list-md":""}},[n("h2",[t._v("Состояние серверов")]),t._v(" "),n("v-btn",{staticClass:"white--text mb15",attrs:{color:"info"},on:{click:t.updateServersStatus}},[t._v("\n    Обновить\n    "),n("v-icon",{attrs:{right:"",dark:""}},[t._v("refresh")])],1),t._v(" "),n("v-data-iterator",{attrs:{items:t.items,"content-tag":"v-layout","hide-actions":"",row:"",wrap:""},scopedSlots:t._u([{key:"item",fn:function(e){return n("v-flex",{attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[n("v-card",[n("v-card-title",{staticClass:"grey lighten-2"},[n("h4",[t._v(t._s(e.item.name))])]),t._v(" "),n("v-divider"),t._v(" "),n("v-list",{attrs:{dense:""}},[n("v-list-tile",[n("v-list-tile-content",[t._v("URL:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[n("a",{attrs:{href:t.getUrl(e.item.url),target:"_blank"}},[t._v(t._s(e.item.url))])])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Status:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[n("span",{class:t.statusCircle(e.item.status.status)},[t._v("\n              "+t._s(e.item.status.status)+" "+t._s(e.item.status.text)+"\n              ")])])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Response time:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[n("span",[t._v("\n              "+t._s(e.item.status.time)+" ms\n              ")])])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Last update:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[n("span",[t._v("\n              "+t._s(e.item.status.lastUpdate)+"\n              ")])])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[t._v("Content length:")]),t._v(" "),n("v-list-tile-content",{staticClass:"align-end"},[n("span",[t._v("\n              "+t._s(e.item.status.contentLength)+"\n              ")])])],1)],1)],1)],1)}}])})],1)},Je=[];function He(t){n("4607")}var Ke=!1,Ye=He,Fe=null,We=null,ze=Object(d["a"])(Ve,Ge,Je,Ke,Ye,Fe,We),Qe=ze.exports;i["default"].use(me["a"]);var Xe=[{path:"/",name:"Dashboard",component:De},{path:"/projects",name:"Projects",component:Se},{path:"/projects/:id",name:"Project",component:Be},{path:"/server-status",name:"Server status",component:Qe}],Ze=new me["a"]({mode:"history",routes:Xe}),tn=function(t,e){t.currentEntity=e,t.data.currentHeaders=t.data.headers[t.currentEntity]},en=function(t){t.status.loading=!1},nn=function(t,e){t.data.headers={},t.data.entities={},e.forEach(function(e){t.data.headers[e.name]=[],e.fields.forEach(function(n){t.data.entities[e.name]=e,t.data.headers[e.name].push({text:n.title,value:n.name})})})},on=function(t,e){t.leftMenu=e;var n=e.reduce(function(e,n){return n.items&&n.items.reduce?n.items.reduce(function(e,n){return n.entityName&&Nt.getEntityByName(t,n.entityName)?(e.push({path:"/".concat(n.link),name:n.routeName,meta:{entityName:n.entityName},component:de}),e):e},e):e},[]);Ze.addRoutes(n)},an={TOGGLE_MENU_MINI:function(t){t.status.miniMenu=!t.status.miniMenu},LOGOUT:function(t){console.log("LOGOUT",t)},LOADING_ERROR:function(t,e){console.error("LOADING_ERROR",e),t.status.loading=!1},LOADING:function(t){t.status.loading=!0},LOADED:function(t){en(t)},LOADED_ALL:function(t,e){nn(t,e.entities),on(t,e.leftMenu),en(t)},LOADED_ENTITY:function(t,e){t.data.items=e.data,tn(t,e.entityName),en(t)},LOADED_WORKLOG:function(t,e){console.log("LOADED_WORKLOG",e),t.data.worklog=e.worklog,t.data.incomesByMonth=e.incomesByMonth,t.data.totalIncome=e.totalIncome,en(t)},LOADING_SUCCESS:en,SET_CURRENT_ENTITY:tn},sn={namespaced:!0,state:Ct,getters:Lt,actions:Kt,mutations:an};i["default"].use(mt["a"]);var rn=new mt["a"].Store({modules:{admin:sn},debug:!0,state:ft,getters:ht,actions:jt,mutations:wt});i["default"].use(a.a),i["default"].use(r.a),i["default"].config.devtools=!0,i["default"].config.productionTip=!1,new i["default"]({debug:!0,el:"#app",router:Ze,store:rn,components:{App:dt},template:"<App/>"}),rn.dispatch("admin/loadAll")},"59a8":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.mb15{margin-bottom:15px}.status-circle:before{content:"";display:inline-block;width:10px;height:10px;border-radius:5px}.green-circle:before{background-color:#20b2aa}.red-circle:before{background-color:crimson}.orange-circle:before{background-color:#ff8c00}',""])},"7e8e":function(t,e,n){var i=n("2962");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("2fb2").default;o("3f5ea310",i,!0,{})},"878d":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".mb15{margin-bottom:15px}",""])},d220:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".table-controls.invisible{display:none}.v-table td{cursor:pointer}",""])},f10c:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".bottom-menu[data-v-7860cefa]{position:absolute;width:100%;bottom:0}.list-border-bottom[data-v-7860cefa]{border-bottom:1px solid hsla(0,0%,100%,.12)}",""])}});
//# sourceMappingURL=app.6ec287f9.js.map